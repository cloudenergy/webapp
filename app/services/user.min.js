"use strict";angular.module("app").service("User",["$rootScope","$q","$cookies","$ionicPlatform","$ionicPopup","$api","$jpush","$storage",function(e,t,n,r,o,s,i,u){var a={};angular.extend(e.User=this,{data:void 0,$userinfo:function(n){var r=t.defer();return s.business.userinfo(n||{},function(t){/^USER$/.test(t.result.character._id)?(e.User.data=a=angular.extend(a,t.result),r.resolve(t)):(u.set(null),r.reject({code:90000009}))},function(e){u.set(null),r.reject(e)}),r.promise},$login:function(n){n=n||{};var r=t.defer();return s.auth.login(n,function(t){u.set(a=t.result,!0),e.User.$userinfo().then(function(e){!window.isPRODUCTION&&i.setAlias(a.uid),r.resolve(e)},function(e){u.set(null),r.reject(e)})},r.reject),r.promise},$logout:function(t){return s.auth.logout(t||{},function(){delete e.User.data,u.set(null),!window.isPRODUCTION&&i.setAlias("")}).$promise}})}]);