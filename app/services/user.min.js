"use strict";angular.module("app").service("User",["$rootScope","$q","$cookies","$api","$storage",function(e,t,n,o,r){var i={};angular.extend(e.User=this,{client:/micromessenger/.test(window.navigator.userAgent.toLowerCase())&&"WECHAT"||{android:"APP_ANDROID",ios:"APP_IOS"}[window.ionic.Platform.platform()]||"WEB",data:void 0,$userinfo:function(t){return o.business.userinfo(t||{},function(t){e.User.data=i=angular.extend(i,t.result)}).$promise},$login:function(n){n=n||{};var s=t.defer();return o.auth.login(n,function(t){r.set(i=t.result,!0),e.User.$userinfo().then(s.resolve,function(){r.set(null),s.reject()})},s.reject),s.promise},$logout:function(t){return o.auth.logout(t||{},function(){delete e.User.data,r.set(null)}).$promise}})}]);