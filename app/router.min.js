"use strict";angular.module("app").config(["$urlRouterProvider","$stateProvider",function(e,a){var r=window.isPRODUCTION?"/":"";e.otherwise(r),a.state("otherwise",{url:r,resolve:{rewrite:["$state",function(e){e.go("app.index",{},{location:"replace"})}]}}).state("app",{abstract:!0,url:"/m",templateUrl:"app/tabs.html"}).state("app.welcome",{url:"/welcome",views:{"@":{templateUrl:"app/modules/welcome/welcome.html",controller:"app.welcome",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/welcome/welcome.min.js")}]}}).state("app.error",{url:"/error?{message}",views:{"@":{templateUrl:"app/modules/error/error.html",controller:"app.error",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/error/error.min.js")}]}}).state("app.login",{url:"/login",views:{"@":{templateUrl:"app/modules/login/login.html",controller:"app.login",controllerAs:"$ctrl"}},resolve:{login:["$ocLazyLoad",function(e){return e.load(["app/modules/login/login.min.css","app/modules/login/login.min.js"])}]}}).state("app.bind",{url:"/bind?{openid}&{platformid}&{target}",views:{"@":{templateUrl:"app/modules/bind/bind.html",controller:"app.bind",controllerAs:"$ctrl"}},resolve:{deps:["$state","$ocLazyLoad","$storage",function(e,a,r){return r.get("token")&&e.go("app.index",{},{location:"replace"}),a.load(["app/modules/bind/bind.min.css","app/modules/bind/bind.min.js"])}]}}).state("app.index",{url:"/index",views:{"view-index":{templateUrl:"app/modules/index/index.html",controller:"app.index",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/index/index.min.css","app/modules/index/index.min.js"])}]}}).state("app.device",{url:"/device",views:{"view-device":{templateUrl:"app/modules/device/device.html",controller:"app.device",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/device/device.min.css","app/modules/device/device.min.js"])}]}}).state("app.device_sensor",{url:"/device/sensor/:type/:id/:title",views:{"view-device":{templateUrl:"app/modules/device/sensor.html",controller:"app.device_sensor",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/device/sensor.min.css","app/modules/device/sensor.min.js"])}]}}).state("app.device_month",{url:"/device/month/:month/:id",views:{"view-device":{templateUrl:"app/modules/device/month.html",controller:"app.device_month",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/components/highcharts.min.js","app/modules/device/month.min.js"])}]}}).state("app.fee",{url:"/fee",views:{"view-index":{templateUrl:"app/modules/fee/fee.html",controller:"app.fee",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/fee/fee.min.js")}]}}).state("app.recharge",{url:"/recharge",views:{"view-recharge":{templateUrl:"app/modules/recharge/recharge.html",controller:"app.recharge",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/recharge/recharge.min.css","app/modules/recharge/recharge.min.js"])}]}}).state("app.recharge_channel",{url:"/recharge/channel",params:{amount:{value:null}},views:{"view-recharge":{templateUrl:"app/modules/recharge/channel.html",controller:"app.recharge_channel",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){var a=["app/modules/recharge/channel.min.js"];return window.isWECHAT&&a.push("https://app.cloudenergy.me/lib/pingpp-js-2.1.9/pingpp.js"),e.load(a).then(function(){window.isWECHAT&&window.pingpp.setAPURL("https://app.cloudenergy.me/lib/pingpp-js-2.1.9/alipay_in_weixin/pay.htm")})}]}}).state("app.recharge_log",{url:"/recharge/log",views:{"view-recharge":{templateUrl:"app/modules/recharge/log.html",controller:"app.recharge_log",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/recharge/log.min.js")}]}}).state("app.account",{url:"/account",views:{"view-account":{templateUrl:"app/modules/account/account.html",controller:"app.account",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/account/account.min.js")}]}}).state("app.repair",{url:"/repair",template:'<repair flex layout="column"></repair>',resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/repair/repair.min.js","app/modules/repair/repair.min.css"])}]}}).state("app.repair_add",{url:"/repair/add",views:{"@app":{template:"<repair-add flex layout-padding></repair-add>"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-file-upload/2.4.0/angular-file-upload.min.js","//cdn.bootcss.com/angular-utf8-base64/0.0.5/angular-utf8-base64.min.js"])}]}}).state("app.repair_detail",{url:"/repair/detail/:id",views:{"@app":{template:'<repair-detail flex layout layout-padding layout-align="center none"></repair-detail>'}}}).state("app.message",{url:"/message",views:{"view-index":{templateUrl:"app/modules/message/message.html",controller:"app.message",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/message/message.min.js")}]}}).state("app.iframe",{url:"/iframe",params:{title:{value:null},target:{value:null}},views:{"view-index":{templateUrl:"app/modules/iframe/iframe.html",controller:"app.iframe",controllerAs:"$ctrl"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/iframe/iframe.min.js")}]}})}]).run(["$rootScope","$state","$ionicLoading","User","ERRORCODE",function(e,a,r,o,l){e.$on("$stateChangeStart",function(e,t,p,n){/^app\.login$/.test(t.name)&&/^app\.bind$/.test(n.name)?e.preventDefault():/^otherwise$/.test(t.name)||(/^app\.welcome$/.test(t.name)||window.isPRODUCTION||localStorage.initialization||(e.preventDefault(),a.go("app.welcome",{},{location:"replace"})),!/^app\.(welcome|error|login|bind)$/.test(t.name)&&angular.isUndefined(o.data)&&(e.preventDefault(),o.$userinfo().then(function(){a.go(t.name,p,{location:"replace"})},function(e){/^90000009$/.test(e.code)&&(r.show({template:'<i class="ion-alert-circled"></i> '+l[e.code],duration:2e3}),o.$logout().then(function(){a.go("app.login",{},{location:"replace"})}))})))})}]);