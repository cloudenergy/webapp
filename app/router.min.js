"use strict";angular.module("app").config(["$locationProvider","$urlRouterProvider","$stateProvider","$qProvider",function(e,a,t,o){o.errorOnUnhandledRejections(!1),t.state("app",{abstract:!0,url:"/m"}).state("app.login",{url:"/login",template:'<login flex layout layout-align="center center"></login>',resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-md5/0.1.10/angular-md5.min.js","app/modules/login/login.min.js?rev=c11501753e"])}]}}).state("app.logout",{url:"/logout",resolve:{logout:["$state","User",function(e,a){return a.$logout({redirect:"/"}).then(function(){e.go("app.login",{},{location:"replace"})})}]}}).state("app.password",{url:"/password",template:'<password flex layout layout-align="center center"></password>',data:{title:"重置密码"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/password/password.min.js?rev=0c9b4a6ea4")}]}}).state("app.bind",{url:"/bind?{openid}&{platformid}&{target}",template:'<bind flex layout layout-align="center center"></bind>',data:{title:"帐号绑定"},resolve:{deps:["$q","$cookies","$state","$ocLazyLoad",function(e,a,t,o){return a.get("token")?(t.go("app.index",{},{location:"replace"}),e.reject()):o.load("app/modules/bind/bind.min.js?rev=0dfdfeb3a6")}]}}).state("app.unbind",{url:"/unbind",resolve:{deps:["$q","$cookies","$api","$state","User",function(e,a,t,o,r){var n=a.get("openid"),l=a.get("platformid");return t.account.unbind(function(){r.$logout({redirect:"/"}).then(function(){o.go("app.bind",{openid:n,platformid:l})})}),e.reject()}]}}).state("app.error",{url:"/error?{message}",template:"<error flex layout layout-padding></error>",data:{title:"错误信息"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/error/error.min.js?rev=3faf9ef423")}]}}).state("app.index",{url:"/index",template:"<index flex layout></index>",resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/index/index.min.css?rev=e94f780dd5","app/modules/index/index.min.js?rev=c90ebdd1bd"])}]}}).state("app.device",{url:"/device",template:'<device flex layout="column"></device>',data:{title:"仪表控制"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/jshashes/1.0.6/hashes.min.js","app/modules/device/device.min.js?rev=bdbbbafabc"])}]}}).state("app.fee",{url:"/fee",template:"<fee flex layout></fee>",data:{title:"消耗账单"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/fee/fee.min.js?rev=7f53655212")}]}}).state("app.recharge",{url:"/recharge",template:"<recharge flex layout-padding></recharge>",data:{title:"账户充值"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["libs/pingpp-js-2.1.7/pingpp.js","app/modules/recharge/recharge.min.js?rev=070061aa91"]).then(function(){pingpp.setAPURL("/libs/pingpp-js-2.1.7/alipay_in_weixin/pay.htm")})}]}}).state("app.rechargelog",{url:"/rechargelog",template:"<rechargelog flex layout></rechargelog>",data:{title:"充值记录"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/rechargelog/rechargelog.min.js?rev=f68b08da98")}]}}).state("app.repair",{url:"/repair",template:'<repair flex layout="column"></repair>',data:{title:"我的报修"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/repair/repair.min.js?rev=c45d4143a4","app/modules/repair/repair.min.css?rev=99aef50801"])}]}}).state("app.repair.add",{url:"/add",data:{title:"我要报修"},views:{"@app":{template:"<repair-add flex layout-padding></repair-add>"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-file-upload/2.4.0/angular-file-upload.min.js","//cdn.bootcss.com/angular-utf8-base64/0.0.5/angular-utf8-base64.min.js"])}]}}).state("app.repair.detail",{url:"/detail/:id",data:{title:"我的报修"},views:{"@app":{template:'<repair-detail flex layout layout-padding layout-align="center none"></repair-detail>'}}}).state("app.message",{url:"/message",template:"<message flex layout></message>",data:{title:"消息通知"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/message/message.min.js?rev=444695790f","app/modules/message/message.min.css?rev=b671effb81"])}]}}).state("app.account",{url:"/account",data:{title:"我的信息"},template:"<account flex></account>",resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/account/account.min.js?rev=0678109b8e")}]}}).state("app.account.edit",{url:"/:action",data:{title:"编辑信息"},views:{"@app":{template:"<account-edit flex layout-padding></account-edit>"}}}),e.html5Mode(!0),a.otherwise(function(e,a){a.otherwise=!0})}]).run(["$rootScope","$mdBottomSheet","$timeout","$location","$state","User",function(e,a,t,o,r,n){r.prev={},e.$on("$locationChangeSuccess",function(e){o.otherwise&&(delete o.otherwise,e.preventDefault(),r.go("app.index",{},{location:"replace"}))}),e.$on("$stateChangeStart",function(e,t,o){a.hide(),/^app\.(login|logout|bind|unbind|error)$/.test(t.name)||(r.prev.state=t.name,r.prev.params=o,angular.isUndefined(n.data)&&(e.preventDefault(),n.$userinfo().then(function(){r.go(r.prev.state,r.prev.params,{location:"replace"})},function(){r.go("app.login")})))}),e.$on("$stateChangeSuccess",function(e,a){document.title=a.data&&a.data.title||"物业中心","WECHAT"===n.client&&t(function(){var e=document.createElement("iframe");e.style.position="absolute",e.style.zIndex=-1,e.style.width="100%",e.style.height="100%",e.style.background="transparent",e.src="package.json",e.onload=function(){t(function(){document.body.removeChild(e)})},document.body.appendChild(e)})})}]);