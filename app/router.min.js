"use strict";angular.module("app").config(["$locationProvider","$urlRouterProvider","$stateProvider","$qProvider",function(e,a,t,o){o.errorOnUnhandledRejections(!1),t.state("app",{abstract:!0,url:"/m",template:'<dashboard locked="$root.sidenavLocked" flex layout></dashboard>'}).state("app.login",{url:"/login",template:'<login flex layout layout-align="center center"></login>',resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-md5/0.1.10/angular-md5.min.js","app/modules/login/login.min.js?rev=0a455ab1fa"])}]}}).state("app.logout",{url:"/logout",resolve:{logout:["$state","User",function(e,a){return a.$logout({redirect:"/"}).then(function(){e.go("app.login",{},{location:"replace"})})}]}}).state("app.password",{url:"/password",template:'<password flex layout layout-align="center center"></password>',data:{title:"重置密码"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/password/password.min.js?rev=e6d01367e6")}]}}).state("app.bind",{url:"/bind?{openid}&{platformid}&{target}",template:'<bind flex layout layout-align="center center"></bind>',data:{title:"帐号绑定"},resolve:{deps:["$q","$cookies","$state","$ocLazyLoad",function(e,a,t,o){return a.get("token")?(t.go("app.addon.index",{},{location:"replace"}),e.reject()):o.load("app/modules/bind/bind.min.js?rev=53244b6572")}]}}).state("app.unbind",{url:"/unbind",template:'<unbind flex layout layout-align="center center"></unbind>',data:{title:"解除绑定"},resolve:{deps:["$q","$cookies","$api","$state","User",function(e,a,t,o,d){var n=a.get("openid"),r=a.get("platformid");return t.account.unbind(function(){d.$logout({redirect:"/"}).then(function(){o.go("app.bind",{openid:n,platformid:r})})}),e.reject()}]}}).state("app.error",{url:"/error?{message}",template:'<error flex layout layout-align="center none"></error>',data:{title:"错误信息"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/error/error.min.js?rev=50767e2b70")}]}}).state("app.addon",{abstract:!0,url:"/addon",templateUrl:"app/modules/addon/addon.html?rev=292db1c821",data:{title:"我的应用"}}).state("app.addon.index",{url:"/index",template:"<addon-index flex layout></addon-index>",resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/addon/index/index.min.css?rev=a15483f207","app/modules/addon/index/index.min.js?rev=427f5160a0"])}]}}).state("app.addon.device",{url:"/device",template:'<addon-device flex layout="column"></addon-device>',data:{title:"仪表控制"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/jshashes/1.0.6/hashes.min.js","app/modules/addon/device/device.min.js?rev=a6e7745c21"])}]}}).state("app.addon.fee",{url:"/fee",template:"<addon-fee flex layout></addon-fee>",data:{title:"消耗账单"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/addon/fee/fee.min.js?rev=bb0b94b3c3")}]}}).state("app.addon.recharge",{url:"/recharge",template:"<addon-recharge flex layout-padding></addon-recharge>",data:{title:"账户充值"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["libs/pingpp-js-2.1.7/pingpp.js","app/modules/addon/recharge/recharge.min.js?rev=979e5eadfe"]).then(function(){pingpp.setAPURL("/libs/pingpp-js-2.1.7/alipay_in_weixin/pay.htm")})}]}}).state("app.addon.rechargelog",{url:"/rechargelog",template:"<addon-rechargelog flex layout></addon-rechargelog>",data:{title:"充值记录"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/addon/rechargelog/rechargelog.min.js?rev=8406a40542")}]}}).state("app.addon.repair",{url:"/repair",template:'<addon-repair flex layout="column"></addon-repair>',data:{title:"我的报修"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/addon/repair/repair.min.js?rev=7651a219f5","app/modules/addon/repair/repair.min.css?rev=9e4bbb0cea"])}]}}).state("app.addon.repair.add",{url:"/add",data:{title:"我要报修"},views:{"@app.addon":{template:"<addon-repair-add flex layout-padding></addon-repair-add>"}},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-file-upload/2.4.0/angular-file-upload.min.js","//cdn.bootcss.com/angular-utf8-base64/0.0.5/angular-utf8-base64.min.js"])}]}}).state("app.addon.repair.detail",{url:"/detail/:id",data:{title:"我的报修"},views:{"@app.addon":{template:'<addon-repair-detail flex layout layout-padding layout-align="center none"></addon-repair-detail>'}}}).state("app.addon.message",{url:"/message",template:"<addon-message flex layout></addon-message>",data:{title:"消息通知"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/addon/message/message.min.js?rev=ff90aafdcb","app/modules/addon/message/message.min.css?rev=0f82edd9f5"])}]}}).state("app.addon.account",{url:"/account",data:{title:"我的信息"},template:'<addon-account user="$root.User.data" flex></addon-account>',resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/addon/account/account.min.js?rev=8747847eb2")}]}}).state("app.addon.account.edit",{url:"/:action",data:{title:"编辑信息"},views:{"@app.addon":{template:"<addon-account-edit flex layout-padding></addon-account-edit>"}}}).state("app.manage",{abstract:!0,url:"/manage",template:"<ui-view flex layout></ui-view>",data:{title:"应用管理"}}).state("app.manage.addonIndex",{url:"/addonindex",template:'<manage-addon-index project="$root.User.project.selected" flex layout-padding></manage-addon-index>',data:{title:"应用首页"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-material-data-table/0.10.10/md-data-table.min.css","//cdn.bootcss.com/angular-material-data-table/0.10.10/md-data-table.min.js","app/modules/manage/addon-index/index.min.js?rev=948767eccc"])}]}}).state("app.comingsoon",{url:"/comingsoon",resolve:{comingsoon:["$q","Dialog",function(e,a){return a.alert({title:"即将上线，敬请期待"}),e.reject()}]}}),e.html5Mode(!0),a.otherwise(function(e,a){a.otherwise=!0})}]).run(["$rootScope","$location","$state","User",function(e,a,t,o){t.prev={},e.$on("$locationChangeSuccess",function(e){a.otherwise&&(delete a.otherwise,e.preventDefault(),t.go("app.addon.index",{},{location:"replace"}))}),e.$on("$stateChangeStart",function(e,a,d){/^app\.(login|logout|bind|unbind|error)$/.test(a.name)||(t.prev.state=a.name,t.prev.params=d,angular.isUndefined(o.data)&&(e.preventDefault(),o.$userinfo().then(function(){t.go(t.prev.state,t.prev.params,{location:"replace"})},function(){t.go("app.login")})))})}]);