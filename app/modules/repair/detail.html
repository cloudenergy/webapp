<ion-modal-view><ion-header-bar align-title="center" class="bar-positive"><div class="buttons"><button class="button button-clear button-primary" type="submit">保存</button></div><h1 class="title">编辑</h1><div class="buttons"><button class="button button-clear button-primary" type="button" ng-click="$ctrl.modalDetail.hide()">取消</button></div></ion-header-bar><ion-content scroll="false" class="stable-bg"><div class="list padding-top"><label class="item item-input"><span class="input-label" ng-bind="$ctrl.editItem.label"></span> <input name="input" type="{{$ctrl.editItem.input.type}}" maxlength="{{$ctrl.editItem.input.maxlength}}" ng-model="$ctrl.editItem.value" ng-pattern="$ctrl.editItem.input.pattern" ng-required="$ctrl.editItem.input.required"></label><div class="text-right padding-top padding-right">{{formEdit.input.$viewValue.length}} / {{$ctrl.editItem.input.maxlength}}</div></div></ion-content></ion-modal-view><form name="form" flex ng-if="0"><div ng-if="$ctrl.uploader" class="mb20 upload-container" layout><div flex="auto" layout layout-align="center center" ng-repeat="item in $ctrl.uploader.queue"><div class="position-relative repair-preview"><img-thumb img-item="item"></img-thumb><i class="em-icons em-18 icon-error" ng-click="$ctrl.removeItem($index)"></i></div></div><div flex="auto" layout layout-align="center center" ng-show="$ctrl.uploader.queue.length<3"><div class="position-relative upload-btn" layout="column" layout-align="center center" md-colors="{color:'grey-500'}"><label for="upload"></label><i class="em-icons em-36 icon-add"></i> <span>添加照片</span> <span class="font-size-12">(限3张)</span> <input id="upload" type="file" accept="image/*" multiple="multiple" nv-file-select uploader="$ctrl.uploader"></div></div></div><div class="pt20 pb30 repair-img-container" ng-if="!$ctrl.uploader" layout><div flex="33" layout layout-align="center center" ng-repeat="img in $ctrl.data.repairImgs"><img ng-src="http://7xruep.com1.z0.glb.clouddn.com/{{img}}?imageView2/1/w/120/h/120" alt=""></div></div><md-input-container class="md-block mt0"><label>报修物品</label><input type="text" name="repairName" ng-model="$ctrl.data.repairName" required ng-disabled="!$ctrl.uploader"><div ng-messages="form.repairName.$error"><div layout layout-align="none center" ng-message="required"><i class="em-icons em-14 icon-warn mr2"></i> <span>请输入物品名称</span></div></div></md-input-container><md-input-container class="md-block mt0"><label>故障位置</label><input type="text" name="repairPlace" ng-model="$ctrl.data.repairPlace" required ng-disabled="!$ctrl.uploader"><div ng-messages="form.repairPlace.$error"><div layout layout-align="none center" ng-message="required"><i class="em-icons em-14 icon-warn mr2"></i><div class="md-char-counter"></div><span>请输入故障位置</span></div></div></md-input-container><md-input-container class="md-block mt0"><label>故障描述</label><textarea name="repairContent" md-maxlength="60" maxlength="60" md-no-resize="false" ng-model="$ctrl.data.repairContent" required rows="3" md-select-on-focus ng-disabled="!$ctrl.uploader"></textarea><div ng-messages="form.repairContent.$error"><div layout layout-align="none center" ng-message="required"><i class="em-icons em-14 icon-warn mr2"></i> <span>请输入描述内容</span></div><div layout layout-align="none center" ng-message="maxlength"><i class="em-icons em-14 icon-warn mr2"></i> <span>请少于60字</span></div></div></md-input-container><md-input-container class="md-block mt0"><label>联系人</label><input type="text" name="repairPerson" ng-model="$ctrl.data.repairPerson" required ng-disabled="!$ctrl.uploader"><div ng-messages="form.repairPerson.$error"><div layout layout-align="none center" ng-message="required"><i class="em-icons em-14 icon-warn mr2"></i> <span>请输入您的姓名</span></div></div></md-input-container><md-input-container class="md-block mt0"><label>联系电话</label><input type="text" name="repairPhone" ng-model="$ctrl.data.repairPhone" required ng-pattern="/^1[3,5-8]\d{9}$/" ng-disabled="!$ctrl.uploader"><div ng-messages="form.repairPhone.$error"><div layout layout-align="none center" ng-message="required"><i class="em-icons em-14 icon-warn mr2"></i> <span>请输入您的电话</span></div><div layout layout-align="none center" ng-message="pattern"><i class="em-icons em-14 icon-warn mr2"></i> <span>正确格式如：13888888888</span></div></div></md-input-container><md-input-container class="md-block mt0" ng-if="!$ctrl.uploader"><label>维修状态</label><input type="text" name="repairState" ng-model="$ctrl.data.repairPerson" required disabled="disabled"></md-input-container><md-input-container class="md-block mt0" ng-if="!$ctrl.uploader"><label>备注</label><input type="text" name="repairState" ng-model="$ctrl.data.repairPerson" required disabled="disabled"></md-input-container><md-input-container layout="column"><md-button ng-if="$ctrl.uploader" type="submit" class="md-raised md-primary m0" ng-click="form.$valid && !$pending && !$ctrl.submitted && $ctrl.submit($event)"><b>提&nbsp;&nbsp;交</b></md-button><md-button ng-if="!$ctrl.uploader" type="button" class="md-raised md-primary m0" ui-sref="app.repair"><b>返&nbsp;&nbsp;回</b></md-button></md-input-container></form>