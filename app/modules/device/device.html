<ion-view><ion-nav-title>仪表</ion-nav-title><ion-nav-buttons side="left"><button class="button button-clear" ng-click="$ctrl.popover.show($event)" ng-if="$ctrl.types">{{$ctrl.types.selected.name||'设备类型'}} <i class="ion-arrow-down-b"></i></button></ion-nav-buttons><ion-nav-buttons side="right"><button class="button button-clear button-icon ng-hide" ng-click="$ctrl.toggleAll=!$ctrl.toggleAll;$ctrl.toggleChange('all',$ctrl.toggleAll);" ng-show="!$ctrl.toggleAll_Hide"><i class="icon" ng-class="{'ion-toggle-filled':$ctrl.toggleAll,'ion-toggle':!$ctrl.toggleAll}"></i></button></ion-nav-buttons><ion-content scrollbar-x="false" class="has-tabs device-content"><ion-refresher class="positive" pulling-icon="ion-ios-arrow-down positive" spinner="ripple" on-refresh="$ctrl.loadList('refresher')"></ion-refresher><ion-list><ion-toggle class="row-no-padding" style="pointer-events:initial" ng-repeat="item in $ctrl.list" ng-model="item.status.switch" ng-checked="item.status.switch" ng-disabled="$ctrl.toggle_disabled||!item.command.EMC_SWITCH" ng-change="$ctrl.toggleChange(item,item.status.switch)"><a class="item item-icon-left padding-top padding-bottom item-text-wrap" style="margin-right:90px;border:none;background:transparent" ui-sref="app.device_sensor({type:$ctrl.types.selected.id,id:item.id,title:item.title})"><i class="icon" ng-class="$ctrl.types.selected.id|deviceMeter:'icon'"></i><p></p><h2 style="margin:0">{{item.title}}</h2><p></p><p style="line-height:16px;margin:0" ng-repeat="channel in item.channels|deviceChannelScale:$ctrl.types.selected.id:'channel'"><small>({{channel.channel}})</small> {{channel.lasttotal}}</p></a></ion-toggle></ion-list><ion-infinite-scroll spinner="ripple" on-infinite="$ctrl.loadList('infinite')" ng-if="!$ctrl.infiniteDisable"></ion-infinite-scroll></ion-content><ion-tabs class="tabs-icon-top tabs-background-stable tabs-color-active-positive"><ion-tab title="首页" icon="icon-app icon-index" ui-sref="app.index"></ion-tab><ion-tab title="仪表" icon="icon-app icon-energy" ui-sref="app.device"></ion-tab><ion-tab title="充值" icon="icon-app icon-recharge" ui-sref="app.recharge"></ion-tab><ion-tab title="个人" icon="icon-app icon-my" ui-sref="app.account"></ion-tab></ion-tabs><script id="device-popover-device-type.html" type="text/ng-template"><!--when length less than 3, then set height to 52+132.55-->
        <!--when length greater or equal to 3, then set height to 52+264.1-->
        <ion-popover-view ng-style="{height:$ctrl.types.length > 3 ? '316.1px' : '184.55px'}">
            <ion-header-bar align-title="center">
                <h1 class="title">设备类型</h1>
            </ion-header-bar>
            <ion-content>
                <ion-list>
                    <ion-radio ng-repeat="item in $ctrl.types" ng-value="item" ng-model="$ctrl.types.selected" ng-change="$ctrl.popover.hide().then($ctrl.loadList('radio'))" name="device-type">{{item.name}}</ion-radio>
                </ion-list>
            </ion-content>
        </ion-popover-view></script></ion-view>