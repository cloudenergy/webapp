<ion-view view-title="{{$root.User.client==='WECHAT'?'':'控制'}}"><script id="device-popover-device-type.html" type="text/ng-template"><!--when length less than 3, then set height to 52+132.55-->
        <!--when length greater or equal to 3, then set height to 52+264.1-->
        <ion-popover-view ng-style="{height:$ctrl.types.length > 3 ? '316.1px' : '184.55px'}">
            <ion-header-bar align-title="center">
                <h1 class="title">设备类型</h1>
            </ion-header-bar>
            <ion-content>
                <ion-list>
                    <ion-radio ng-repeat="item in $ctrl.types" ng-value="item" ng-model="$ctrl.types.selected" ng-change="$ctrl.popover.hide().then($ctrl.loadList('radio'))" name="device-type">{{item.name}}</ion-radio>
                </ion-list>
            </ion-content>
        </ion-popover-view></script><ion-nav-buttons side="left"><button class="button button-clear" ng-click="$ctrl.popover.show($event)">{{$ctrl.types.selected.name||'设备类型'}} <i class="ion-arrow-down-b"></i></button></ion-nav-buttons><ion-nav-buttons side="right"><div class="toggle-small"><ion-toggle class="toggle-energized item-borderless button-outline" ng-model="$ctrl.toggleAll" ng-checked="$ctrl.toggleAll" ng-disabled="$ctrl.toggle_disabled||$ctrl.toggleAll_Disabled" ng-change="$ctrl.toggleChange('all',$ctrl.toggleAll);"></ion-toggle></div></ion-nav-buttons><ion-content scrollbar-x="false"><ion-refresher class="positive" pulling-icon="ion-ios-arrow-down positive" spinner="ripple" on-refresh="$ctrl.loadList('refresher')"></ion-refresher><ion-list><ion-toggle class="toggle-small item-icon-left" ng-repeat="item in $ctrl.list" ng-model="item.status.switch" ng-checked="item.status.switch" ng-disabled="$ctrl.toggle_disabled||!item.command.EMC_SWITCH" ng-change="$ctrl.toggleChange(item,item.status.switch)"><i class="icon" ng-class="item.icon"></i> {{item.title}}</ion-toggle></ion-list><ion-infinite-scroll spinner="ripple" on-infinite="$ctrl.loadList('infinite')" ng-if="!$ctrl.infiniteDisable"></ion-infinite-scroll></ion-content></ion-view>