<ion-view view-title="控制"><ion-header-bar align-title="center" class="bar-positive" ng-class="{'header-bar-wechat':$root.User.client==='WECHAT'}"><button class="button button-clear" ng-click="$ctrl.popover.show($event)">{{$ctrl.types.selected.name||'设备类型'}} <i class="ion-arrow-down-b"></i></button><h1 class="title">控制</h1><div class="buttons toggle-small"><ion-toggle class="toggle-energized item-borderless button-outline" ng-model="$ctrl.toggleAll" ng-checked="$ctrl.toggleAll" ng-disabled="$ctrl.toggle_disabled||$ctrl.toggleAll_Disabled" ng-change="$ctrl.toggleChange('all',$ctrl.toggleAll);"></ion-toggle></div></ion-header-bar><ion-content scrollbar-x="false" class="has-tabs"><ion-refresher class="positive" pulling-icon="ion-ios-arrow-down positive" spinner="ripple" on-refresh="$ctrl.loadList('refresher')"></ion-refresher><ion-list><ion-toggle class="toggle-small item-icon-left" ng-repeat="item in $ctrl.list" ng-model="item.status.switch" ng-checked="item.status.switch" ng-disabled="$ctrl.toggle_disabled||!item.command.EMC_SWITCH" ng-change="$ctrl.toggleChange(item,item.status.switch)"><i class="icon" ng-class="item.icon"></i> {{item.title}}</ion-toggle></ion-list><ion-infinite-scroll spinner="ripple" on-infinite="$ctrl.loadList('infinite')" ng-if="!$ctrl.infiniteDisable"></ion-infinite-scroll></ion-content><ion-tabs class="tabs-icon-top tabs-background-stable tabs-color-active-positive"><ion-tab title="租户通" icon="icon-app icon-index" ui-sref="app.index"></ion-tab><ion-tab title="控制" icon="icon-app icon-control" ui-sref="app.device"></ion-tab><ion-tab title="充值" icon="icon-app icon-recharge" ui-sref="app.recharge"></ion-tab><ion-tab title="个人" icon="icon-app icon-my" ui-sref="app.account"></ion-tab></ion-tabs><script id="device-popover-device-type.html" type="text/ng-template"><!--when length less than 3, then set height to 52+132.55-->
        <!--when length greater or equal to 3, then set height to 52+264.1-->
        <ion-popover-view ng-style="{height:$ctrl.types.length > 3 ? '316.1px' : '184.55px'}">
            <ion-header-bar align-title="center">
                <h1 class="title">设备类型</h1>
            </ion-header-bar>
            <ion-content>
                <ion-list>
                    <ion-radio ng-repeat="item in $ctrl.types" ng-value="item" ng-model="$ctrl.types.selected" ng-change="$ctrl.popover.hide().then($ctrl.loadList('radio'))" name="device-type">{{item.name}}</ion-radio>
                </ion-list>
            </ion-content>
        </ion-popover-view></script></ion-view>