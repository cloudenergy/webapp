"use strict";angular.module("app").component("dashboard",{templateUrl:"app/modules/dashboard/dashboard.html?rev=74a2ffec03",controller:["$$rAF","$element","$rootScope","$timeout","$mdSidenav","$state","$sessionStorage","$api","MENUCONFIG",function(e,n,t,a,i,o,c,d,s){var l,r=this;angular.extend(r,{$onInit:function(){e(function(){r["client_"+c.client]=c.client,r.renderTitle(o.$current),r.sidenav=i("sidenav").onClose(function(){delete t.sidenavLocked}),t.$watch("sidenavLocked",function(e){r.locked=e,e?r.sidenav.open():r.sidenav.isOpen()&&r.sidenav.close()}),t.$watch("UserInfo",function(e){e?(r.isLogin=!0,r.UserInfo=e,angular.forEach(s,function(n){e.character.level<=n.character.level&&n.client[c.client]&&this.push(n)},r.sideMenu=[]),r.toggleSidemenu(o.current.name),r.client_WEB&&d.account.info({id:e.uid},function(e){r.Account=e.result||{}})):(delete t.sidenavLocked,delete r.isLogin,delete r.UserInfo,delete r.Account,delete r.sideMenu)}),t.$watch("HttpRequestInProgress",function(e){l&&a.cancel(l),e?r.inprogress=!0:l=a(function(){delete r.inprogress},100)}),t.$on("$stateChangeStart",function(){delete t.sidenavLocked}),t.$on("$stateChangeSuccess",function(e,n){r.renderTitle(o.$current),r.toggleSidemenu(n.name)})})},openSidenav:function(){t.sidenavLocked=!0},renderTitle:function(e){for(document.title=e.data&&e.data.title||"物业中心",r.client_WECHAT&&a(function(){var e=document.createElement("iframe");e.style.position="absolute",e.style.zIndex=-1,e.style.width="100%",e.style.height="100%",e.style.background="transparent",e.src="package.json",e.onload=function(){a(function(){document.body.removeChild(e)})},document.body.appendChild(e)}),r.breadcrumbs=[];e;)e.data&&Object.keys(e.data).length&&e.data.title&&r.breadcrumbs.unshift({state:e.abstract?null:e.name,title:e.data.title}),e=e.parent},toggleSidemenu:function(e){r.sideMenu&&(r.sideMenu.active=e,r.sideMenu.toggle=/\w+\.\w+/.exec(e)[0])}})}]});