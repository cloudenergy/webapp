"use strict";angular.module("app").component("dashboard",{templateUrl:"app/modules/dashboard/dashboard.html?rev=ea02091c4c",controller:["$$rAF","$element","$rootScope","$timeout","$swipe","$animateCss","$mdSidenav","$state","$sessionStorage","$api","MENUCONFIG",function(e,t,n,i,a,o,d,s,c,l,r){var u,f=this;angular.extend(f,{$onInit:function(){e(function(){f.renderTitle(s.$current),f.sideSwipe(angular.element(t[0].querySelector(".site-sidenav"))),f.sidenav=d("sidenav").onClose(function(){delete n.sidenavLocked}),n.$watch("sidenavLocked",function(e){f.locked=e,e?f.sidenav.open():f.sidenav.isOpen()&&f.sidenav.close()}),n.$watch("UserInfo",function(e){e?(f.isLogin=!0,f.UserInfo=e,l.account.info({id:e.uid},function(e){f.Account=e.result||{},angular.forEach(r,function(e){f.Account.character.level<=e.character.level&&e.client[c.client]&&this.push(e)},f.sideMenu=[]),f.toggleSidemenu(s.current.name)}),f.WECHAT="WECHAT"===c.client):(delete n.sidenavLocked,delete f.isLogin,delete f.UserInfo,delete f.Account,delete f.sideMenu,delete f.WECHAT)}),n.$watch("HttpRequestInProgress",function(e){u&&i.cancel(u),e?f.inprogress=!0:u=i(function(){delete f.inprogress},100)}),n.$on("$stateChangeSuccess",function(e,t){f.renderTitle(s.$current),f.toggleSidemenu(t.name),delete n.sidenavLocked})})},openSidenav:function(){n.sidenavLocked=!0},renderTitle:function(e){for(document.title=e.data&&e.data.title||"物业中心",i(function(){var e=document.createElement("iframe");e.style.position="absolute",e.style.zIndex=-1,e.style.width="100%",e.style.height="100%",e.style.background="transparent",e.src="app/components/sidemenu/sidemenu.html?rev=ecc0a6c4cb",e.onload=function(){i(function(){document.body.removeChild(e)})},document.body.appendChild(e)}),f.breadcrumbs=[];e;)e.data&&Object.keys(e.data).length&&e.data.title&&f.breadcrumbs.unshift({state:e.abstract?null:e.name,title:e.data.title}),e=e.parent},sideSwipe:function(t){var i=0,d=0;a.bind(t,{start:function(e){i=e.x,d=t[0].clientWidth},move:function(e){t.css({left:-Math.max(0,i-e.x)})},end:function(a){i=(i-a.x)/d<.33?0:"-100%",o(t,{easing:"ease-in-out",to:{left:i},duration:.33}).start().then(function(){i&&(t.addClass("visibility-hidden"),delete n.sidenavLocked,e(function(){t.removeClass("visibility-hidden").removeAttr("style")}))})}})},toggleSidemenu:function(e){f.sideMenu&&(f.sideMenu.active=e,f.sideMenu.toggle=/\w+\.\w+/.exec(e)[0])}})}]});