"use strict";angular.module("app").component("dashboard",{templateUrl:"app/modules/dashboard/dashboard.html?rev=c90d2212b1",controller:["$$rAF","$element","$rootScope","$timeout","$mdBottomSheet","$mdSidenav","$state","$sessionStorage","$api","MENUCONFIG",function(e,t,n,o,i,a,c,d,s,r){var l,u=this;angular.extend(u,{$onInit:function(){e(function(){u["client_"+d.client]=d.client,u.renderTitle(c.$current),u.sidenav=a("sidenav").onClose(function(){delete n.sidenavLocked}),n.$watch("sidenavLocked",function(e){u.locked=e,e?u.sidenav.open():u.sidenav.isOpen()&&u.sidenav.close()}),n.$watch("UserInfo",function(e){e?(u.isLogin=!0,u.UserInfo=e,angular.forEach(r,function(t){e.character.level<=t.character.level&&t.client[d.client]&&this.push(t)},u.sideMenu=[]),u.toggleSidemenu(c.current.name),u.client_WEB&&s.account.info({id:e.uid},function(e){u.Account=e.result||{}})):(delete n.sidenavLocked,delete u.isLogin,delete u.UserInfo,delete u.Account,delete u.sideMenu)}),n.$watch("HttpRequestInProgress",function(e){l&&o.cancel(l),e?u.inprogress=!0:l=o(function(){delete u.inprogress},100)}),n.$on("$stateChangeStart",function(){delete n.sidenavLocked,i.hide()}),n.$on("$stateChangeSuccess",function(e,t){u.renderTitle(c.$current),u.toggleSidemenu(t.name)})})},renderTitle:function(e){for(u.client_WECHAT&&o(function(){var e=document.createElement("iframe");e.style.position="absolute",e.style.zIndex=-1,e.style.width="100%",e.style.height="100%",e.style.background="transparent",e.src="package.json",e.onload=function(){o(function(){document.body.removeChild(e)})},document.body.appendChild(e)}),u.breadcrumbs=[];e;)e.data&&Object.keys(e.data).length&&e.data.title&&u.breadcrumbs.unshift({state:e.abstract?null:e.name,title:e.data.title}),e=e.parent;document.title=u.breadcrumbs.length&&u.breadcrumbs[u.breadcrumbs.length-1].title||"物业中心"},toggleSidemenu:function(e){u.sideMenu&&(u.sideMenu.active=e,u.sideMenu.toggle=/\w+\.\w+/.exec(e)[0])}})}]});