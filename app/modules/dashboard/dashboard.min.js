"use strict";angular.module("app").component("dashboard",{templateUrl:"app/modules/dashboard/dashboard.html?rev=bf76f2ec95",controller:["$element","$rootScope","$timeout","$mdSidenav","$state","$sessionStorage","$api","MENUCONFIG",function(e,t,n,a,i,o,c,d){var s,l=this;angular.extend(l,{$onInit:function(){l["client_"+o.client]=o.client,l.renderTitle(i.$current),l.sidenav=a("sidenav").onClose(function(){delete t.sidenavLocked}),t.$watch("sidenavLocked",function(e){l.locked=e,e?l.sidenav.open():l.sidenav.isOpen()&&l.sidenav.close()}),t.$watch("UserInfo",function(e){e?(l.isLogin=!0,l.UserInfo=e,angular.forEach(d,function(t){e.character.level<=t.character.level&&t.client[o.client]&&this.push(t)},l.sideMenu=[]),l.toggleSidemenu(i.current.name),l.client_WEB&&c.account.info({id:e.uid},function(e){l.Account=e.result||{}})):(delete t.sidenavLocked,delete l.isLogin,delete l.UserInfo,delete l.Account,delete l.sideMenu)}),t.$watch("HttpRequestInProgress",function(e){s&&n.cancel(s),e?l.inprogress=!0:s=n(function(){delete l.inprogress},100)}),t.$on("$stateChangeStart",function(){delete t.sidenavLocked}),t.$on("$stateChangeSuccess",function(e,t){l.renderTitle(i.$current),l.toggleSidemenu(t.name)})},openSidenav:function(){t.sidenavLocked=!0},renderTitle:function(e){for(document.title=e.data&&e.data.title||"物业中心",l.client_WECHAT&&n(function(){var e=document.createElement("iframe");e.style.position="absolute",e.style.zIndex=-1,e.style.width="100%",e.style.height="100%",e.style.background="transparent",e.src="package.json",e.onload=function(){n(function(){document.body.removeChild(e)})},document.body.appendChild(e)}),l.breadcrumbs=[];e;)e.data&&Object.keys(e.data).length&&e.data.title&&l.breadcrumbs.unshift({state:e.abstract?null:e.name,title:e.data.title}),e=e.parent},toggleSidemenu:function(e){l.sideMenu&&(l.sideMenu.active=e,l.sideMenu.toggle=/\w+\.\w+/.exec(e)[0])}})}]});