"use strict";angular.module("app").controller("app.login",["$state","$ionicHistory","$ionicLoading","User","ERRORCODE",function(e,i,t,a,o){this.submit=function(s){return s.user?s.password?(s.onsubmit=!0,void a.$login({user:s.user,passwd:(new Hashes.MD5).hex(s.password).toUpperCase()}).then(function(){i.clearHistory(),i.clearCache().then(function(){e.go(e.prev.state||"app.index",e.prev.params||{},{location:"replace"})})},function(e){delete s.onsubmit,t.show({template:'<i class="ion-alert-circled"></i> '+(o[parseInt(e.code)]||e.message||"登录失败"),duration:2e3})})):t.show({template:'<i class="ion-android-alert"></i> 密码不能为空',duration:1e3}):t.show({template:'<i class="ion-android-alert"></i> 帐号不能为空',duration:1e3})}}]);