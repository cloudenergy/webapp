"use strict";angular.module("app").component("password",{templateUrl:"app/modules/password/password.html?rev=4d636c9152",controller:["$api","$state","Dialog","$scope",function(t,a,s,e){e.$watchCollection("$ctrl.data",function(t){t.newpasswd&&t.confirmpasswd&&e.form.confirmpasswd.$setValidity("match",angular.equals(t.newpasswd,t.confirmpasswd))}),this.data={newpasswd:"",oldpasswd:""},this.submit=function(e,n){n=angular.copy(n),delete n.confirmpasswd,t.account.passwd(n,function(){s.alert({title:"修改成功，请重新登录",targetEvent:e}).then(function(){a.go("app.logout")})},function(t){s.alert({title:"修改失败",textContent:{20000003:"参数不全",90000006:["验证失败","原密码密码有误"][1]}[parseInt(t.code)]||t.message,targetEvent:e})})}}]});