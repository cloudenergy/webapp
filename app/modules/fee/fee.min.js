"use strict";angular.module("app").controller("app.fee",["$scope","$timeout","$api","User",function(e,i,s,n){var a=this,r={count:0,pageindex:0,pagesize:50};a.loadList=function(t){/refresher/.test(t)&&(r.count=0,r.pageindex=0),s.business.fundflow({_inprogress:!1,project:n.data.project,uid:n.data.uid,from:moment().subtract(30,"days").format("YYYYMMDD"),to:moment().format("YYYYMMDD"),category:"PAYFEES",pageindex:r.pageindex+1,pagesize:r.pagesize},function(e){/refresher/.test(t)&&a.list&&(a.list.length=0),angular.isObject(e.result)&&(e=e.result,r=e.paging,angular.forEach(e.detail,function(e){this.push(e)},a.list=a.list||[]))},function(){a.list=[]}).$promise.finally(function(){/refresher/.test(t)&&e.$broadcast("scroll.refreshComplete"),/infinite/.test(t)&&e.$broadcast("scroll.infiniteScrollComplete"),a.infiniteDisable=!0,a.list&&a.list.length<r.count&&i(function(){delete a.infiniteDisable},16.66)})}}]);