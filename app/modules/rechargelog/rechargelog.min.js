"use strict";angular.module("app").controller("app.rechargelog",["$scope","$timeout","$ionicLoading","$api","User","ERRORCODE",function(e,t,i,n,s,o){var a=this,r={count:0,pageindex:0,pagesize:50};a.loadList=function(l){/refresher/.test(l)&&(r.count=0,r.pageindex=0),n.business.recentchargelog({_inprogress:!1,project:[{id:s.data.project}],from:moment().subtract(12,"month").format("YYYYMMDD"),to:moment().format("YYYYMMDD"),status:"SUCCESS",pageindex:r.pageindex+1,pagesize:r.pagesize},function(e){/refresher/.test(l)&&a.list&&(a.list.length=0),e=e.result[s.data.project],r=e.paging,angular.forEach(e.detail,function(e){this.push(e)},a.list=a.list||[])},function(e){i.show({template:'<i class="ion-alert-circled"></i> '+(o[parseInt(e.code)]||e.message||"请求失败"),duration:2e3})}).$promise.finally(function(){/refresher/.test(l)&&e.$broadcast("scroll.refreshComplete"),/infinite/.test(l)&&e.$broadcast("scroll.infiniteScrollComplete"),a.infiniteDisable=!0,a.list&&a.list.length<r.count&&t(function(){delete a.infiniteDisable},16.66)})}}]);