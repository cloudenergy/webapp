"use strict";angular.module("app").component("addonMessage",{templateUrl:"app/modules/addon/message/message.html?rev=7afab8ed58",controller:["$element","$api","$swipe","$timeout","User",function(t,e,n,a,i){var o,g=this;angular.extend(g,{$onInit:function(){g.loadList()},paging:{count:0,pageindex:0,pagesize:30,unload:!0},list:[],loadList:function(){(g.paging.unload||g.list.length<g.paging.count&&!g.paging.loading)&&(delete g.paging.unload,g.paging.loading=!0,e.business.recentchargelog({project:[{id:i.data.project}],from:moment().subtract(12,"month").format("YYYYMMDD"),to:moment().format("YYYYMMDD"),status:"SUCCESS",pageindex:g.paging.pageindex+1,pagesize:g.paging.pagesize},function(t){t=t.result[i.data.project]||{},angular.forEach(t.detail||[],function(t){g.list.push(t)}),g.paging=t.paging}))},infiniteItems:{getItemAtIndex:function(t){return t===g.list.length-1&&g.loadList(),g.list[t]},getLength:function(){return g.list.length}},messageType:[{title:"余额不足提醒",bgColor:"deep-orange-300",state:"app.addon.charge",tip1:"点此去充值，如已充值请忽略",tip2:"充值"},{title:"余额不足提醒",bgColor:"red-300",state:"app.addon.charge",tip1:"点此去充值，如已充值请忽略",tip2:"充值"},{title:"充值成功提醒",bgColor:"green-300",state:"app.addon.chargelog",tip1:"点击查看账户余额详情",tip2:"详情"}],deleteMsg:function(t){t.preventDefault(),t.stopPropagation()},checkLast:function(e){e&&g.sideSwipe(angular.element(t[0].querySelectorAll(".tip-delete")))},sideSwipe:function(t){angular.forEach(t,function(e){var i,g=angular.element(e);n.bind(g.find("a"),{start:function(e,n){i=!1,t.find("button").removeClass("show"),"touchstart"==n.type&&(o=a(function(){g.find("button").addClass("show"),i=!0},800))},cancel:function(){a.cancel(o)},end:function(t,e){a.cancel(o),i&&(e.preventDefault(),e.stopPropagation())}})})}})}]});