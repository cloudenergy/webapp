"use strict";angular.module("app").component("addonMessage",{templateUrl:"app/modules/addon/message/message.html?rev=eb74a25e31",controller:["$element","$api","$swipe","$timeout","User",function(e,t,n,a,i){var o,g=this;angular.extend(g,{$onInit:function(){g.loadList()},paging:{count:0,pageindex:0,pagesize:30,unload:!0},list:[],loadList:function(){(g.paging.unload||g.list.length<g.paging.count&&!g.paging.loading)&&(delete g.paging.unload,g.paging.loading=!0,t.business.recentchargelog({project:[{id:i.data.project}],from:moment().subtract(12,"month").format("YYYYMMDD"),to:moment().format("YYYYMMDD"),status:"SUCCESS",pageindex:g.paging.pageindex+1,pagesize:g.paging.pagesize},function(e){e=e.result[i.data.project],angular.forEach(e.detail,function(e){g.list.push(e)}),g.paging=e.paging}))},infiniteItems:{getItemAtIndex:function(e){return e===g.list.length-1&&g.loadList(),g.list[e]},getLength:function(){return g.list.length}},messageType:[{title:"余额不足提醒",bgColor:"deep-orange-300",state:"app.addon.recharge",tip1:"点此去充值，如已充值请忽略",tip2:"充值"},{title:"余额不足提醒",bgColor:"red-300",state:"app.addon.recharge",tip1:"点此去充值，如已充值请忽略",tip2:"充值"},{title:"充值成功提醒",bgColor:"green-300",state:"app.addon.rechargelog",tip1:"点击查看账户余额详情",tip2:"详情"}],deleteMsg:function(e){e.preventDefault(),e.stopPropagation()},checkLast:function(t){t&&g.sideSwipe(angular.element(e[0].querySelectorAll(".tip-delete")))},sideSwipe:function(e){angular.forEach(e,function(t){var i,g=angular.element(t);n.bind(g.find("a"),{start:function(t,n){i=!1,e.find("button").removeClass("show"),"touchstart"==n.type&&(o=a(function(){g.find("button").addClass("show"),i=!0},800))},cancel:function(){a.cancel(o)},end:function(e,t){a.cancel(o),i&&(t.preventDefault(),t.stopPropagation())}})})}})}]});