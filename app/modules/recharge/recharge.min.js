"use strict";angular.module("app").controller("app.recharge",["$scope","$q","$ionicLoading","$state","$api","User",function(e,a,n,t,r,o){var u=this,i=document.querySelector("#app_recharge_input_custom");!function(e,a){window.isAndroid&&(e.type="number"),e.onkeyup=function(){e.value&&!/^\d+(\.(\d{1,2})?)?$/.test(e.value)&&(e.value=a)},e.onkeydown=function(){/^\d+(\.(\d{1,2})?)?$/.test(e.value)&&(a=e.value)}}(i),e.$on("$ionicView.enter",function(){u.refresh()}),u.refresh=function(a){return o.$userinfo({_inprogress:a}).then(function(){u.UserData=o.data}).finally(function(){angular.isDefined(a)&&e.$broadcast("scroll.refreshComplete")})},angular.extend(u,{custom_min:.01,amounts:[100,500,1e3,2e3,5e3,0],recharge:{amount:100},select:function(e){u.recharge.amount=e,i.value=""},submit:function(){return u.recharge.amount||i.value?i.value&&!angular.isNumber(parseFloat(i.value))?(u.recharge.amount=0,n.show({template:'<i class="ion-android-alert"></i> 充值金额必须为数字',duration:2e3})):i.value&&i.value<u.custom_min?n.show({template:'<i class="ion-android-alert"></i> 最低充值'+u.custom_min+"元",duration:2e3}):void t.go("app.recharge_channel",{amount:u.recharge.amount||i.value}):n.show({template:'<i class="ion-android-alert"></i> '+(0===u.recharge.amount?"请输入充值金额":"请选择充值金额"),duration:2e3})}})}]);