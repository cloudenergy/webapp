"use strict";angular.module("app").controller("app.recharge",["$scope","$q","$ionicLoading","$state","$api","User",function(e,r,t,a,o,n){var c=this;c.isAndroid=window.isAndroid,c.isIOS=window.isIOS,(c.refresh=function(r){return n.$userinfo({_inprogress:r}).then(function(){c.UserData=n.data}).finally(function(){angular.isDefined(r)&&e.$broadcast("scroll.refreshComplete")})})(),angular.extend(c,{custom_min:100,amounts:[100,500,1e3,2e3,5e3],recharge:{amount:100,custom:void 0},custom:function(){delete c.recharge.amount,/^\d+\.\d{3,}/.test(c.recharge.custom)&&(c.recharge.custom=parseFloat(/\d+\.\d{2}/.exec(c.recharge.custom)[0])),angular.isNumber(c.recharge.custom)||delete c.recharge.custom},select:function(e){c.recharge.amount=e,delete c.recharge.custom},submit:function(e){return c.recharge.amount||c.recharge.custom?e.custom.$error.number?(delete c.recharge.amount,delete c.recharge.custom,e.custom.$setViewValue(void 0),e.$setPristine(),e.$setUntouched(),t.show({template:'<i class="ion-android-alert"></i> 充值金额必须为数字',duration:1e3})):c.recharge.custom&&c.recharge.custom<c.custom_min?t.show({template:'<i class="ion-android-alert"></i> 最低充值'+c.custom_min+"元",duration:1e3}):void a.go("app.recharge_channel",{amount:c.recharge.amount||c.recharge.custom}):t.show({template:'<i class="ion-android-alert"></i> 请选择充值金额',duration:1e3})}})}]);