"use strict";angular.module("app").controller("app.recharge",["$scope","$q","$ionicLoading","$state","$api","User",function(e,r,t,a,o,c){var n=this;(n.refresh=function(r){return c.$userinfo({_inprogress:r}).then(function(){n.UserData=c.data}).finally(function(){angular.isDefined(r)&&e.$broadcast("scroll.refreshComplete")})})(),angular.extend(n,{custom_min:100,amounts:[100,500,1e3,2e3,5e3],recharge:{amount:100,custom:void 0},custom:function(){delete n.recharge.amount,/^\d+\.\d{3,}/.test(n.recharge.custom)&&(n.recharge.custom=parseFloat(/\d+\.\d{2}/.exec(n.recharge.custom)[0])),angular.isNumber(n.recharge.custom)||delete n.recharge.custom},select:function(e){n.recharge.amount=e,delete n.recharge.custom},submit:function(e){return n.recharge.amount||n.recharge.custom?e.custom.$error.number?(delete n.recharge.amount,delete n.recharge.custom,e.custom.$setViewValue(void 0),e.$setPristine(),e.$setUntouched(),t.show({template:'<i class="ion-android-alert"></i> 充值金额必须为数字',duration:1e3})):n.recharge.custom&&n.recharge.custom<n.custom_min?t.show({template:'<i class="ion-android-alert"></i> 最低充值'+n.custom_min+"元",duration:1e3}):void a.go("app.recharge_channel",{amount:n.recharge.amount||n.recharge.custom}):t.show({template:'<i class="ion-android-alert"></i> 请选择充值金额',duration:1e3})}})}]);