"use strict";angular.module("app").controller("app.recharge",["$scope","$q","$ionicLoading","$state","$api","User",function(n,e,a,r,t,o){var i,u,s,c=this,l=document.querySelector("#app_recharge_input_custom");u=l,window.isAndroid&&(u.type="number"),u.onkeydown=function(){u.value&&!/^\d+(\.(\d{1,2})?)?$/.test(u.value)||(s=u.value)},u.onkeyup=function(){u.value&&!/^\d+(\.(\d{1,2})?)?$/.test(u.value)&&(u.value=s)},n.$on("$ionicView.enter",function(){c.refresh()}),c.refresh=function(e){return o.$userinfo({_inprogress:e}).then(function(){c.UserData=o.data}).finally(function(){angular.isDefined(e)&&n.$broadcast("scroll.refreshComplete")})},angular.extend(c,{custom_min:.01,amounts:[100,500,1e3,2e3,5e3,0],recharge:{amount:100},select:function(e){c.recharge.amount=e,l.value=""},submit:function(){if(i=l.value,!c.recharge.amount&&!i)return a.show({template:'<i class="ion-android-alert"></i> '+(0===c.recharge.amount?"请输入充值金额":"请选择充值金额"),duration:2e3});if(i){if(c.recharge.amount=0,/^-$/.test(i)||!angular.isNumber(parseFloat(i)))return a.show({template:'<i class="ion-android-alert"></i> 充值金额必须为数字',duration:2e3});if(i<c.custom_min)return a.show({template:'<i class="ion-android-alert"></i> 最低充值'+c.custom_min+"元",duration:2e3})}r.go("app.recharge_channel",{amount:c.recharge.amount||i.replace(/\.$/,"")})}})}]);