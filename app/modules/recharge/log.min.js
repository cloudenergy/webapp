"use strict";angular.module("app").controller("app.recharge_log",["$scope","$timeout","$api","User",function(e,t,i,s){var n=this,a={count:0,pageindex:0,pagesize:50};n.loadList=function(r){/refresher/.test(r)&&(a.count=0,a.pageindex=0),i.business.recentchargelog({_inprogress:!1,project:[{id:s.data.project,account:s.data.uid}],from:moment().subtract(12,"month").format("YYYYMMDD"),to:moment().format("YYYYMMDD"),status:"SUCCESS",pageindex:a.pageindex+1,pagesize:a.pagesize},function(e){/refresher/.test(r)&&n.list&&(n.list.length=0),angular.isObject(e.result)&&(e=e.result[s.data.project],a=e.paging,angular.forEach(e.detail,function(e){this.push(e)},n.list=n.list||[]))}).$promise.finally(function(){/refresher/.test(r)&&e.$broadcast("scroll.refreshComplete"),/infinite/.test(r)&&e.$broadcast("scroll.infiniteScrollComplete"),n.infiniteDisable=!0,n.list&&n.list.length<a.count&&t(function(){delete n.infiniteDisable},16.66)})}}]);