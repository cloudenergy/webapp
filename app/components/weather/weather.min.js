"use strict";angular.module("app").component("weather",{templateUrl:"app/components/weather/weather.html?rev=b98cd0ff1c",controller:["$api",function(e){var t=this;angular.extend(t,{$onInit:function(){e.baidu.location(function(e){t.city=e&&e.content&&e.content.address_detail&&e.content.address_detail.city||"",t.get_weather()})},get_recentweathers:function(){t.city&&e.baidu.recentweathers({cityname:t.city.replace("市","")},function(e){e.retData&&(t.recentweathers={},angular.extend(t.recentweathers,e.retData.today),t.recentweathers.curTemp=parseInt(t.recentweathers.curTemp)+" <small>℃</small>",t.recentweathers.hightemp=parseInt(t.recentweathers.hightemp),t.recentweathers.lowtemp=parseInt(t.recentweathers.lowtemp)+" <small>℃</small>")})},get_weather:function(){t.city&&e.baidu.weather({location:t.city},function(e){angular.isArray(e.results)&&e.results[0]?function(e,a){t.weather={},e.weather_data&&e.weather_data[0]&&(a=/^([\u4e00-\u9fa5]+\s+(\d+[\u4e00-\u9fa5])+).*?(\d+℃)\)/.exec(e.weather_data[0].date),e.weather_data[0].date=a[1],e.weather_data[0].temperature_now=a[3].replace("℃","<small>℃</small>"),e.weather_data[0].temperature=e.weather_data[0].temperature.replace("℃","<small>℃</small>"),e.weather_data[0].wind="风力 "+e.weather_data[0].wind),angular.extend(t.weather,e)}(e.results[0]):t.get_recentweathers()},t.get_recentweathers)}})}]});