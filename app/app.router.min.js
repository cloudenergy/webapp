"use strict";angular.module("app").config(["$locationProvider","$urlRouterProvider","$stateProvider","$qProvider",function(e,a,t,o){o.errorOnUnhandledRejections(!1),t.state("app",{abstract:!0,url:"/m",template:"<dashboard flex layout></dashboard>"}).state("app.login",{url:"/login",template:'<login flex layout layout-align="center center"></login>',resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/angular-md5/0.1.10/angular-md5.min.js","app/modules/login/login.min.js?rev=97c2fb8c1c"])}]}}).state("app.logout",{url:"/logout",resolve:{logout:["$state","User",function(e,a){return a.logout({redirect:"/"}).then(function(){e.prev={},e.go("app.login",{},{location:"replace"})})}]}}).state("app.password",{url:"/password",template:'<password flex layout layout-align="center center"></password>',data:{title:"重置密码"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/password/password.min.js?rev=0e1cb15fa8")}]}}).state("app.bind",{url:"/bind?{openid}&{platformid}&{target}",template:'<bind flex layout layout-align="center center"></bind>',data:{title:"帐号绑定"},resolve:{deps:["$q","$cookies","$state","$ocLazyLoad",function(e,a,t,o){return a.get("token")?(t.go("app.addon.index",{},{location:"replace"}),e.reject()):o.load("app/modules/bind/bind.min.js?rev=60fc90e669")}]}}).state("app.unbind",{url:"/unbind",template:'<unbind flex layout layout-align="center center"></unbind>',data:{title:"解除绑定"},resolve:{deps:["$q","$cookies","$api","$state","User",function(e,a,t,o,n){var d=a.get("openid"),l=a.get("platformid");return t.account.unbind(function(){n.logout({redirect:"/"}).then(function(){o.go("app.bind",{openid:d,platformid:l})})}),e.reject()}]}}).state("app.error",{url:"/error?{message}",template:'<error flex layout layout-align="center none"></error>',data:{title:"错误信息"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/error/error.min.js?rev=50767e2b70")}]}}).state("app.addon",{abstract:!0,url:"/addon",templateUrl:"app/modules/addon/addon.html?rev=1ce28dc69b",data:{title:"我的应用"}}).state("app.addon.index",{url:"/index",template:'<addon-index flex layout layout-align="center none"></addon-index>',resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/addon/index/index.min.css?rev=ffcda2b22e","app/modules/addon/index/index.min.js?rev=cb0beab94d"])}]}}).state("app.addon.account",{url:"/account",data:{title:"我的信息"},template:'<addon-account flex layout layout-align-gt-sm="center none"></addon-account>',resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/addon/account/account.min.js?rev=7db69d1783")}]}}).state("app.addon.account.mobile",{url:"/mobile",data:{title:"手机号码"},views:{"@app.addon":{template:'<addon-account-edit action="mobile" flex layout layout-align="center none"></addon-account-edit>'}}}).state("app.addon.account.email",{url:"/email",data:{title:"电子邮箱"},views:{"@app.addon":{template:'<addon-account-edit action="email" flex layout layout-align="center none"></addon-account-edit>'}}}).state("app.addon.account.department",{url:"/department",data:{title:"商铺名称"},views:{"@app.addon":{template:'<addon-account-edit action="department" flex layout layout-align="center none"></addon-account-edit>'}}}).state("app.addon.charge",{url:"/charge",template:'<addon-charge flex layout layout-padding layout-align-gt-sm="center none"></addon-charge>',data:{title:"账户充值"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["libs/pingpp-js-2.1.5/pingpp.js","app/modules/addon/charge/charge.min.js?rev=44ddd84009"]).then(function(){pingpp.setAPURL("/libs/pingpp-js-2.1.5/alipay_in_weixin/pay.htm")})}]}}).state("app.addon.chargelog",{url:"/chargelog",template:'<addon-chargelog flex layout layout-align-gt-sm="center none"></addon-chargelog>',data:{title:"充值记录"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/addon/chargelog/chargelog.min.js?rev=91aab28429")}]}}).state("app.addon.fee",{url:"/fee",template:'<addon-fee flex layout layout-align-gt-sm="center none"></addon-fee>',data:{title:"消耗账单"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/addon/fee/fee.min.js?rev=052923db6b")}]}}).state("app.addon.device",{url:"/device",template:'<addon-device flex layout layout-align-gt-sm="center none"></addon-device>',data:{title:"仪表控制"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["//cdn.bootcss.com/jshashes/1.0.6/hashes.min.js","app/modules/addon/device/device.min.js?rev=bc5dc5c904"])}]}}).state("app.addon.message",{url:"/message",template:'<addon-message flex layout layout-align-gt-sm="center none"></addon-message>',data:{title:"消息通知"},resolve:{deps:["$ocLazyLoad",function(e){return e.load(["app/modules/addon/message/message.min.js?rev=134bc46efa","app/modules/addon/message/message.min.css?rev=d7df19c466"])}]}}).state("app.addon.repair",{url:"/repair",template:'<addon-repair flex layout layout-align-gt-sm="center none"></addon-repair>',data:{title:"维修服务"},resolve:{deps:["$ocLazyLoad",function(e){}]}}).state("app.admin",{abstract:!0,url:"/admin",template:"<ui-view flex layout></ui-view>",data:{title:"应用管理"}}).state("app.admin.index",{url:"/index",template:"<admin-index flex layout></admin-index>",data:{title:"首页设置"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/admin/index/index.min.js?rev=dbc5e65b7d")}]}}).state("app.admin.application",{url:"/application",template:"<admin-application flex layout></admin-application>",data:{title:"应用设置"},resolve:{deps:["$ocLazyLoad",function(e){return e.load("app/modules/admin/application/application.min.js?rev=d452a07236")}]}}).state("app.comingsoon",{url:"/comingsoon",resolve:{comingsoon:["$q","Dialog",function(e,a){return a.alert({title:"即将上线，敬请期待"}),e.reject()}]}}),e.html5Mode(!0),a.otherwise(function(e,a){a.otherwise=!0})}]).run(["$rootScope","$location","$state","User",function(e,a,t,o){t.prev={},e.$on("$locationChangeSuccess",function(e){a.otherwise&&(delete a.otherwise,e.preventDefault(),t.go("app.addon.index",{},{location:"replace"}))}),e.$on("$stateChangeStart",function(e,a,n){/^app\.(login|logout|bind|unbind|error)$/.test(a.name)||(t.prev.state=a.name,t.prev.params=n,angular.isUndefined(o.data)&&(e.preventDefault(),o.userinfo().then(function(){t.go(t.prev.state,t.prev.params,{location:"replace"})},function(){t.go("app.login")})))})}]);